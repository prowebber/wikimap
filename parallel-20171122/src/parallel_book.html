<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>GNU Parallel book</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body>



<ul id="index">
  <li><a href="#Learn-GNU-Parallel-in-5-minutes">Learn GNU Parallel in 5 minutes</a>
    <ul>
      <li><a href="#Input-sources">Input sources</a></li>
      <li><a href="#Building-the-command-line">Building the command line</a></li>
      <li><a href="#Controlling-the-output">Controlling the output</a></li>
      <li><a href="#Controlling-the-execution">Controlling the execution</a></li>
      <li><a href="#Pipe-mode">Pipe mode</a></li>
      <li><a href="#Thats-it">That&#39;s it</a></li>
    </ul>
  </li>
  <li><a href="#Learn-GNU-Parallel-in-an-hour">Learn GNU Parallel in an hour</a>
    <ul>
      <li><a href="#Input-sources1">Input sources</a></li>
      <li><a href="#Building-the-command-line1">Building the command line</a>
        <ul>
          <li><a href="#The-command">The command</a></li>
          <li><a href="#The-replacement-strings">The replacement strings</a></li>
        </ul>
      </li>
      <li><a href="#Controlling-the-output1">Controlling the output</a></li>
      <li><a href="#Controlling-the-execution1">Controlling the execution</a>
        <ul>
          <li><a href="#Remote-execution">Remote execution</a></li>
        </ul>
      </li>
      <li><a href="#Pipe-mode-head2-Thats-it">Pipe mode =head2 That&#39;s it</a></li>
    </ul>
  </li>
  <li><a href="#Advanced-usage">Advanced usage</a></li>
</ul>

<h1 id="Learn-GNU-Parallel-in-5-minutes">Learn GNU Parallel in 5 minutes</h1>

<p>You just need to run commands in parallel. You do not care about fine tuning.</p>

<p>To get going please run this to make some example files:</p>

<pre><code>  # If your system does not have &#39;seq&#39;, we will use &#39;jot&#39; instead
  if ! seq 1 2&gt;/dev/null; then alias seq=jot; fi

  seq 5 | parallel &#39;seq {} &gt; example.{}&#39;</code></pre>

<h2 id="Input-sources">Input sources</h2>

<p>GNU <b>parallel</b> reads values from input sources. One input source is the command line. The values are put after <b>:::</b> :</p>

<pre><code>  parallel echo ::: 1 2 3 4 5</code></pre>

<p>This makes it easy to run the same program on some files:</p>

<pre><code>  parallel wc ::: example.*</code></pre>

<p>If you give multiple <b>:::</b>s, GNU <b>parallel</b> will make all combinations:</p>

<pre><code>  parallel wc ::: -l -c ::: example.*</code></pre>

<p>GNU <b>parallel</b> can also read the values from stdin (standard input):</p>

<pre><code>  seq 5 | parallel echo</code></pre>

<h2 id="Building-the-command-line">Building the command line</h2>

<p>The command line is put before the <b>:::</b>. It can contain contain a command and options for the command:</p>

<pre><code>  parallel wc -l ::: example.*</code></pre>

<p>The command can contain multiple programs. Just remember to quote characters that are interpreted by the shell (such as <b>;</b>):</p>

<pre><code>  parallel echo counting lines&#39;;&#39; wc -l ::: example.*</code></pre>

<p>The value will normally be appended to the command, but can be placed anywhere by using the replacement string <b>{}</b>:</p>

<pre><code>  parallel echo counting {}&#39;;&#39; wc -l {} ::: example.*</code></pre>

<p>When using multiple input sources you use the positional replacement strings:</p>

<pre><code>  parallel echo count {1} in {2}&#39;;&#39; wc {1} {2} ::: -l -c ::: example.*</code></pre>

<h2 id="Controlling-the-output">Controlling the output</h2>

<p>The output will be printed as soon as the command completes. This means the output may come in a different order than the input:</p>

<pre><code>  parallel sleep {}&#39;;&#39; echo {} done ::: 5 4 3 2 1</code></pre>

<p>You can force GNU <b>parallel</b> to print in the order of the values with <b>--keep-order</b>/<b>-k</b>. This will still run the commands in parallel. The output of the later jobs will be delayed, until the earlier jobs are printed:</p>

<pre><code>  parallel -k sleep {}&#39;;&#39; echo {} done ::: 5 4 3 2 1</code></pre>

<h2 id="Controlling-the-execution">Controlling the execution</h2>

<p>If your jobs are compute intensive, you will most likely run one job for each core in the system. This is the default for GNU <b>parallel</b>.</p>

<p>But sometimes you want more jobs running. You control the number of job slots with <b>-j</b>. Give <b>-j</b> the number of jobs to run in parallel:</p>

<pre><code>  parallel -j50 \
    wget http://ftpmirror.gnu.org/parallel/parallel-{1}{2}22.tar.bz2 \
    ::: 2012 2013 2014 2015 2016 \
    ::: 01 02 03 04 05 06 07 08 09 10 11 12</code></pre>

<h2 id="Pipe-mode">Pipe mode</h2>

<p>GNU <b>parallel</b> can also pass blocks of data to commands on stdin (standard input):</p>

<pre><code>  seq 1000000 | parallel --pipe wc</code></pre>

<p>This can be used to process big text files. By default GNU <b>parallel</b> splits on \n (newline) and passes a block of around 1 MB to each job.</p>

<h2 id="Thats-it">That&#39;s it</h2>

<p>You have now learned the basic use of GNU <b>parallel</b>. This will probably cover most cases of your use of GNU <b>parallel</b>.</p>

<p>The rest of this document is simply to go into more details on each of the sections and cover special use cases.</p>

<h1 id="Learn-GNU-Parallel-in-an-hour">Learn GNU Parallel in an hour</h1>

<p>In this part we will dive deeper into what you learned in the first 5 minutes.</p>

<p>To get going please run this to make some example files:</p>

<pre><code>  seq 6 &gt; seq6
  seq 6 -1 1 &gt; seq-6</code></pre>

<h2 id="Input-sources1">Input sources</h2>

<p>On top of the command line, input sources can also be stdin (standard input or &#39;-&#39;), files and fifos and they can be mixed. Files are given after <b>-a</b> or <b>::::</b>. So these all do the same:</p>

<pre><code>  parallel echo Dice1={1} Dice2={2} ::: 1 2 3 4 5 6 ::: 6 5 4 3 2 1
  parallel echo Dice1={1} Dice2={2} ::: &lt;(seq 6) ::: &lt;(seq 6 -1 1)
  parallel echo Dice1={1} Dice2={2} :::: seq6 seq-6
  parallel -a seq6 -a seq-6 echo Dice1={1} Dice2={2}
  parallel -a seq6 echo Dice1={1} Dice2={2} :::: seq-6
  parallel echo Dice1={1} Dice2={2} ::: 1 2 3 4 5 6 :::: seq-6
  cat seq-6 | parallel echo Dice1={1} Dice2={2} :::: seq-6 -</code></pre>

<p>If stdin (standard input) is the only input source, you do not need the &#39;-&#39;:</p>

<pre><code>  cat seq6 | parallel echo Dice1={1}</code></pre>

<p>You can link multiple input sources with <b>:::+</b> and <b>::::+</b>:</p>

<pre><code>  parallel echo {1}={2} ::: I II III IV V VI :::+ 1 2 3 4 5 6
  parallel echo {1}={2} ::: I II III IV V VI ::::+ seq6</code></pre>

<h2 id="Building-the-command-line1">Building the command line</h2>

<h3 id="The-command">The command</h3>

<p>The command can be a script, a binary or a Bash function if the function is exported using <b>export -f</b>:</p>

<pre><code>  # Works only in Bash
  my_func() {
    echo in my_func &quot;$1&quot;
  }
  export -f my_func
  parallel my_func ::: 1 2 3</code></pre>

<h3 id="The-replacement-strings">The replacement strings</h3>

<p>GNU <b>parallel</b> has some replacement strings to make it easier</p>

<h2 id="Controlling-the-output1">Controlling the output</h2>

<h2 id="Controlling-the-execution1">Controlling the execution</h2>

<h3 id="Remote-execution">Remote execution</h3>

<h2 id="Pipe-mode-head2-Thats-it">Pipe mode =head2 That&#39;s it</h2>

<h1 id="Advanced-usage">Advanced usage</h1>

<p>env_parallel, parset, env_parset</p>


</body>

</html>


